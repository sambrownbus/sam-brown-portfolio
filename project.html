<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Sam Brown — Project</title>
    <link rel="stylesheet" href="./styles.css"/>
    <style>
      body{background:#f5f2ee;color:#111;margin:0}
      .container{max-width:1000px;margin:auto;padding:2rem}
      .project-title{font-size:2rem;font-weight:700;margin-bottom:.25rem}
      .project-subtitle{font-size:1.1rem;color:#555;margin-bottom:1rem}
      .project-year{font-size:.95rem;color:#777;margin-bottom:1.25rem}
      .media-wrap img{width:100%;height:auto;display:block;margin-bottom:1rem}
      .back-link{display:inline-block;margin-bottom:2rem;text-decoration:none;color:#111;font-weight:500}
      .back-link:hover{text-decoration:underline}
    </style>
  </head>
  <body>
    <div class="container">
      <a href="./index.html" class="back-link">← Back to portfolio</a>
      <div id="project">
        <div class="project-title"></div>
        <div class="project-subtitle"></div>
        <div class="project-year"></div>
        <div class="media-wrap"></div>
      </div>
    </div>

    <script>
      const FALLBACK_POSTER = 'data:image/svg+xml;utf8,' + encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800" viewBox="0 0 1200 800"><rect width="100%" height="100%" fill="#eae6df"/></svg>`);

      /* Keep this array in sync with index.html (same data) */
      window.PROJECTS = window.PROJECTS || []; /* will be empty on hard load */
      if(!window.PROJECTS.length){
        /* lightweight copy: you can paste the same array here if you prefer strict independence */
        window.PROJECTS = []; /* Optional: paste the full array here too */
      }

      const slug = decodeURIComponent(window.location.hash.replace('#',''));
      /* If this page was opened directly (no array present), fall back by reading from localStorage (set by index.html) */
      try {
        if(!window.PROJECTS.length){
          const cached = localStorage.getItem('SB_PROJECTS');
          if(cached) window.PROJECTS = JSON.parse(cached);
        } else {
          localStorage.setItem('SB_PROJECTS', JSON.stringify(window.PROJECTS));
        }
      } catch(e){}

      const proj = window.PROJECTS.find(p => p.slug === slug);
      const mediaWrap = document.querySelector('.media-wrap');

      if(!proj){
        document.querySelector('#project').innerHTML = '<p>Project not found.</p>';
      } else {
        document.querySelector('.project-title').textContent = proj.title;
        document.querySelector('.project-subtitle').textContent = proj.subtitle || '';
        document.querySelector('.project-year').textContent = proj.year || '';
        const img = document.createElement('img');
        img.src = proj.cover || FALLBACK_POSTER;
        img.alt = proj.title;
        img.onerror = () => img.src = FALLBACK_POSTER;
        mediaWrap.appendChild(img);
      }
    </script>
  </body>
</html>

